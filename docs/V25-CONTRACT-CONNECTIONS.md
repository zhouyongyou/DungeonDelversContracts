# V25 åˆç´„äº’é€£å®Œæ•´åƒè€ƒæ–‡æª”

> ğŸ“… **æ›´æ–°æ—¥æœŸ**: 2025-08-06  
> âš¡ **ç‰ˆæœ¬**: V25  
> ğŸ¯ **ç‹€æ…‹**: 100% å®Œæˆ (21/21 é€£æ¥)

## ğŸ“‹ åˆç´„åœ°å€ç¸½è¡¨

| åˆç´„åç¨± | åœ°å€ | éƒ¨ç½²ç‹€æ…‹ |
|---------|------|---------|
| **DungeonCore** | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | â™»ï¸ é‡è¤‡ä½¿ç”¨ |
| **DungeonMaster** | `0xE391261741Fad5FCC2D298d00e8c684767021253` | ğŸ†• æ–°éƒ¨ç½² |
| **DungeonStorage** | `0x539AC926C6daE898f2C843aF8C59Ff92B4b3B468` | ğŸ†• æ–°éƒ¨ç½² |
| **Hero** | `0xD48867dbac5f1c1351421726B6544f847D9486af` | ğŸ†• æ–°éƒ¨ç½² |
| **Relic** | `0x86f15792Ecfc4b5F2451d841A3fBaBEb651138ce` | ğŸ†• æ–°éƒ¨ç½² |
| **Party** | `0x28A85D14e0F87d6eD04e21c30992Df8B3e9434E3` | ğŸ†• æ–°éƒ¨ç½² |
| **AltarOfAscension** | `0x095559778C0BAA2d8FA040Ab0f8752cF07779D33` | ğŸ†• æ–°éƒ¨ç½² |
| **PlayerProfile** | `0x0f5932e89908400a5AfDC306899A2987b67a3155` | â™»ï¸ é‡è¤‡ä½¿ç”¨ |
| **PlayerVault** | `0x62Bce9aF5E2C47b13f62A2e0fCB1f9C7AfaF8787` | â™»ï¸ é‡è¤‡ä½¿ç”¨ |
| **VIPStaking** | `0xC0D8C84e28E5BcfC9cBD109551De53BA04e7328C` | â™»ï¸ é‡è¤‡ä½¿ç”¨ |
| **Oracle** | `0xf8CE896aF39f95a9d5Dd688c35d381062263E25a` | â™»ï¸ é‡è¤‡ä½¿ç”¨ |
| **VRFManager** | `0xFac10cd51981ED3aE85a05c5CFF6ab5b8e145038` | ğŸ”§ å›ºå®šä½¿ç”¨ (VRFManagerV2Plus) |
| **SoulShard** | `0x97B2C2a9A11C7b6A020b4bAEaAd349865eaD0bcF` | ğŸ”§ å›ºå®šä½¿ç”¨ |
| **USD** | `0x7C67Af4EBC6651c95dF78De11cfe325660d935FE` | ğŸ”§ å›ºå®šä½¿ç”¨ (æ¸¬è©¦ç”¨) |
| **DungeonMasterWallet** | `0x10925A7138649C7E1794CE646182eeb5BF8ba647` | ğŸ‘¤ éŒ¢åŒ…åœ°å€ |

---

## ğŸ”— åˆç´„äº’é€£è©³ç´°æ˜ å°„è¡¨

### 1ï¸âƒ£ DungeonCore (ç¸½æ©Ÿåˆç´„)
> **åˆç´„æ–‡ä»¶**: `DungeonCore.sol`  
> **åœ°å€**: `0x8a2D2b1961135127228EdD71Ff98d6B097915a13`

#### ğŸ” è®€å–å‡½æ•¸ (View Functions)
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| PlayerProfile | `playerProfileAddress()` | `0x0f5932e89908400a5AfDC306899A2987b67a3155` | âœ… |
| Hero | `heroContractAddress()` | `0xD48867dbac5f1c1351421726B6544f847D9486af` | âœ… |
| Relic | `relicContractAddress()` | `0x86f15792Ecfc4b5F2451d841A3fBaBEb651138ce` | âœ… |
| Party | `partyContractAddress()` | `0x28A85D14e0F87d6eD04e21c30992Df8B3e9434E3` | âœ… |
| DungeonMaster | `dungeonMasterAddress()` | `0xE391261741Fad5FCC2D298d00e8c684767021253` | âœ… |
| AltarOfAscension | `altarOfAscensionAddress()` | `0x095559778C0BAA2d8FA040Ab0f8752cF07779D33` | âœ… |
| PlayerVault | `playerVaultAddress()` | `0x62Bce9aF5E2C47b13f62A2e0fCB1f9C7AfaF8787` | âœ… |
| VIPStaking | `vipStakingAddress()` | `0xC0D8C84e28E5BcfC9cBD109551De53BA04e7328C` | âœ… |
| Oracle | `oracleAddress()` | `0xf8CE896aF39f95a9d5Dd688c35d381062263E25a` | âœ… |
| USD Token | `usdTokenAddress()` | `0x7C67Af4EBC6651c95dF78De11cfe325660d935FE` | âœ… |
| SoulShard Token | `soulShardTokenAddress()` | `0x97B2C2a9A11C7b6A020b4bAEaAd349865eaD0bcF` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸ (Setter Functions)
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ | äº‹ä»¶ |
|---------|---------|------|------|
| PlayerProfile | `setPlayerProfile(address)` | `onlyOwner` | `PlayerProfileSet` |
| Hero | `setHeroContract(address)` | `onlyOwner` | `HeroContractSet` |
| Relic | `setRelicContract(address)` | `onlyOwner` | `RelicContractSet` |
| Party | `setPartyContract(address)` | `onlyOwner` | `PartyContractSet` |
| DungeonMaster | `setDungeonMaster(address)` | `onlyOwner` | `DungeonMasterSet` |
| AltarOfAscension | `setAltarOfAscension(address)` | `onlyOwner` | `AltarOfAscensionSet` |
| PlayerVault | `setPlayerVault(address)` | `onlyOwner` | `PlayerVaultSet` |
| VIPStaking | `setVipStaking(address)` | `onlyOwner` | `VipStakingSet` |
| Oracle | `setOracle(address)` | `onlyOwner` | `OracleSet` |

---

### 2ï¸âƒ£ DungeonMaster (åœ°åŸä¸»åˆç´„)
> **åˆç´„æ–‡ä»¶**: `DungeonMaster.sol`  
> **åœ°å€**: `0xE391261741Fad5FCC2D298d00e8c684767021253`

#### ğŸ” è®€å–å‡½æ•¸
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| DungeonCore | `dungeonCore()` | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | âœ… |
| DungeonStorage | `dungeonStorage()` | `0x539AC926C6daE898f2C843aF8C59Ff92B4b3B468` | âœ… |
| VRFManager | `vrfManager()` | `0xFac10cd51981ED3aE85a05c5CFF6ab5b8e145038` | âœ… |
| Hero | `hero()` | `0xD48867dbac5f1c1351421726B6544f847D9486af` | âœ… |
| Relic | `relic()` | `0x86f15792Ecfc4b5F2451d841A3fBaBEb651138ce` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ |
|---------|---------|------|
| DungeonCore | `setDungeonCore(address)` | `onlyOwner` |
| DungeonStorage | `setDungeonStorage(address)` | `onlyOwner` |
| VRFManager | `setVRFManager(address)` | `onlyOwner` |
| SoulShard Token | `setSoulShardToken(address)` | `onlyOwner` |

---

### 3ï¸âƒ£ Hero NFT åˆç´„
> **åˆç´„æ–‡ä»¶**: `Hero.sol`  
> **åœ°å€**: `0xD48867dbac5f1c1351421726B6544f847D9486af`

#### ğŸ” è®€å–å‡½æ•¸
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| DungeonCore | `dungeonCore()` | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | âœ… |
| VRFManager | `vrfManager()` | `0xFac10cd51981ED3aE85a05c5CFF6ab5b8e145038` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ | äº‹ä»¶ |
|---------|---------|------|------|
| DungeonCore | `setDungeonCore(address)` | `onlyOwner` | - |
| VRFManager | `setVRFManager(address)` | `onlyOwner` | `VRFManagerSet` |

---

### 4ï¸âƒ£ Relic NFT åˆç´„
> **åˆç´„æ–‡ä»¶**: `Relic.sol`  
> **åœ°å€**: `0x86f15792Ecfc4b5F2451d841A3fBaBEb651138ce`

#### ğŸ” è®€å–å‡½æ•¸
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| DungeonCore | `dungeonCore()` | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | âœ… |
| VRFManager | `vrfManager()` | `0xFac10cd51981ED3aE85a05c5CFF6ab5b8e145038` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ | äº‹ä»¶ |
|---------|---------|------|------|
| DungeonCore | `setDungeonCore(address)` | `onlyOwner` | - |
| VRFManager | `setVRFManager(address)` | `onlyOwner` | `VRFManagerSet` |

---

### 5ï¸âƒ£ Party NFT åˆç´„
> **åˆç´„æ–‡ä»¶**: `Party.sol` (PartyV3)  
> **åœ°å€**: `0x28A85D14e0F87d6eD04e21c30992Df8B3e9434E3`

#### ğŸ” è®€å–å‡½æ•¸
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| DungeonCore | `dungeonCoreContract()` | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ | äº‹ä»¶ |
|---------|---------|------|------|
| DungeonCore | `setDungeonCore(address)` | `onlyOwner` | `DungeonCoreSet` |

> **âš ï¸ ç‰¹åˆ¥æ³¨æ„**: Party åˆç´„çš„è®€å–å‡½æ•¸åç¨±èˆ‡å…¶ä»–åˆç´„ä¸åŒï¼Œä½¿ç”¨ `dungeonCoreContract()` è€Œé `dungeonCore()`

---

### 6ï¸âƒ£ AltarOfAscension (å‡æ˜Ÿç¥­å£‡)
> **åˆç´„æ–‡ä»¶**: `AltarOfAscension.sol` (AltarOfAscensionVRF)  
> **åœ°å€**: `0x095559778C0BAA2d8FA040Ab0f8752cF07779D33`

#### ğŸ” è®€å–å‡½æ•¸
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| DungeonCore | `dungeonCore()` | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ |
|---------|---------|------|
| DungeonCore | `setDungeonCore(address)` | `onlyOwner` |

---

### 7ï¸âƒ£ PlayerProfile (ç©å®¶æª”æ¡ˆ)
> **åˆç´„æ–‡ä»¶**: `PlayerProfile.sol`  
> **åœ°å€**: `0x0f5932e89908400a5AfDC306899A2987b67a3155`

#### ğŸ” è®€å–å‡½æ•¸
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| DungeonCore | `dungeonCore()` | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ |
|---------|---------|------|
| DungeonCore | `setDungeonCore(address)` | `onlyOwner` |

---

### 8ï¸âƒ£ PlayerVault (ç©å®¶é‡‘åº«)
> **åˆç´„æ–‡ä»¶**: `PlayerVault.sol`  
> **åœ°å€**: `0x62Bce9aF5E2C47b13f62A2e0fCB1f9C7AfaF8787`

#### ğŸ” è®€å–å‡½æ•¸
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| DungeonCore | `dungeonCore()` | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ |
|---------|---------|------|
| DungeonCore | `setDungeonCore(address)` | `onlyOwner` |

---

### 9ï¸âƒ£ VIPStaking (VIP è³ªæŠ¼)
> **åˆç´„æ–‡ä»¶**: `VIPStaking.sol`  
> **åœ°å€**: `0xC0D8C84e28E5BcfC9cBD109551De53BA04e7328C`

#### ğŸ” è®€å–å‡½æ•¸
| é€£æ¥ç›®æ¨™ | è®€å–å‡½æ•¸ | è¿”å›å€¼ | é©—è­‰ç‹€æ…‹ |
|---------|---------|-------|---------|
| DungeonCore | `dungeonCore()` | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | âœ… |

#### âš™ï¸ è¨­å®šå‡½æ•¸
| ç›®æ¨™åˆç´„ | è¨­å®šå‡½æ•¸ | æ¬Šé™ |
|---------|---------|------|
| DungeonCore | `setDungeonCore(address)` | `onlyOwner` |

---

## ğŸ”§ è¨­å®šé †åºå»ºè­°

### Phase 1: DungeonCore è¨­å®š (ç¸½æ©Ÿè¨­å®š)
```javascript
// åœ¨ DungeonCore ä¸Šè¨­å®šæ‰€æœ‰æ¨¡çµ„åœ°å€
await dungeonCore.setPlayerProfile("0x0f5932e89908400a5AfDC306899A2987b67a3155");
await dungeonCore.setHeroContract("0xD48867dbac5f1c1351421726B6544f847D9486af");
await dungeonCore.setRelicContract("0x86f15792Ecfc4b5F2451d841A3fBaBEb651138ce");
await dungeonCore.setPartyContract("0x28A85D14e0F87d6eD04e21c30992Df8B3e9434E3");
await dungeonCore.setDungeonMaster("0xE391261741Fad5FCC2D298d00e8c684767021253");
await dungeonCore.setAltarOfAscension("0x095559778C0BAA2d8FA040Ab0f8752cF07779D33");
await dungeonCore.setPlayerVault("0x62Bce9aF5E2C47b13f62A2e0fCB1f9C7AfaF8787");
await dungeonCore.setVipStaking("0xC0D8C84e28E5BcfC9cBD109551De53BA04e7328C");
await dungeonCore.setOracle("0xf8CE896aF39f95a9d5Dd688c35d381062263E25a");
```

### Phase 2: å„æ¨¡çµ„å›é€£ DungeonCore
```javascript
// æ‰€æœ‰æ¨¡çµ„éƒ½éœ€è¦é€£å› DungeonCore
await hero.setDungeonCore("0x8a2D2b1961135127228EdD71Ff98d6B097915a13");
await relic.setDungeonCore("0x8a2D2b1961135127228EdD71Ff98d6B097915a13");
await party.setDungeonCore("0x8a2D2b1961135127228EdD71Ff98d6B097915a13");
await altarOfAscension.setDungeonCore("0x8a2D2b1961135127228EdD71Ff98d6B097915a13");
await playerProfile.setDungeonCore("0x8a2D2b1961135127228EdD71Ff98d6B097915a13");
await playerVault.setDungeonCore("0x8a2D2b1961135127228EdD71Ff98d6B097915a13");
await vipStaking.setDungeonCore("0x8a2D2b1961135127228EdD71Ff98d6B097915a13");
```

### Phase 3: DungeonMaster å°ˆå±¬è¨­å®š
```javascript
// DungeonMaster ç‰¹æ®Šé€£æ¥
await dungeonMaster.setDungeonCore("0x8a2D2b1961135127228EdD71Ff98d6B097915a13");
await dungeonMaster.setDungeonStorage("0x539AC926C6daE898f2C843aF8C59Ff92B4b3B468");
await dungeonMaster.setVRFManager("0xFac10cd51981ED3aE85a05c5CFF6ab5b8e145038");
```

### Phase 4: VRF é€£æ¥è¨­å®š
```javascript
// VRF ç›¸é—œé€£æ¥
await hero.setVRFManager("0xFac10cd51981ED3aE85a05c5CFF6ab5b8e145038");
await relic.setVRFManager("0xFac10cd51981ED3aE85a05c5CFF6ab5b8e145038");
```

---

## ğŸ›  ç¶­è­·å·¥å…·è…³æœ¬

### è¨­å®šè…³æœ¬
- **`v25-setup-connections-fixed.js`** - å®Œæ•´è¨­å®šæ‰€æœ‰åˆç´„é€£æ¥
- **`fix-party-connection.js`** - ä¿®å¾© Party åˆç´„é€£æ¥
- **`v25-verify-all-connections.js`** - é©—è­‰æ‰€æœ‰é€£æ¥ç‹€æ…‹

### é©—è­‰è…³æœ¬
```bash
# åŸ·è¡Œå®Œæ•´é©—è­‰
npx hardhat run scripts/active/v25-verify-all-connections.js --network bsc

# ä¿®å¾©å–®ä¸€åˆç´„
npx hardhat run scripts/active/fix-party-connection.js --network bsc
```

---

## ğŸ“Š é€£æ¥ç‹€æ…‹çµ±è¨ˆ

| åˆç´„ | é€£æ¥æ•¸ | ç‹€æ…‹ |
|-----|--------|------|
| DungeonCore | 9 | âœ… 100% |
| DungeonMaster | 3 | âœ… 100% |
| Hero | 2 | âœ… 100% |
| Relic | 2 | âœ… 100% |
| Party | 1 | âœ… 100% |
| AltarOfAscension | 1 | âœ… 100% |
| PlayerProfile | 1 | âœ… 100% |
| PlayerVault | 1 | âœ… 100% |
| VIPStaking | 1 | âœ… 100% |
| **ç¸½è¨ˆ** | **21** | âœ… **100%** |

---

## ğŸš¨ é‡è¦æ³¨æ„äº‹é …

### å‡½æ•¸åç¨±å·®ç•°
1. **Party åˆç´„ç‰¹æ®Šæ€§**: ä½¿ç”¨ `dungeonCoreContract()` è®€å–ï¼Œè€Œéæ¨™æº–çš„ `dungeonCore()`
2. **DungeonCore**: ä½¿ç”¨ `playerProfileAddress()` è€Œé `playerProfile()`

### æ¬Šé™ç®¡ç†
- æ‰€æœ‰è¨­å®šå‡½æ•¸éƒ½éœ€è¦ `onlyOwner` æ¬Šé™
- ç¢ºä¿ä½¿ç”¨æ­£ç¢ºçš„ Owner è³¬æˆ¶åŸ·è¡Œè¨­å®š
- å»ºè­°åœ¨æ¸¬è©¦ç’°å¢ƒå…ˆé©—è­‰å†éƒ¨ç½²åˆ°ä¸»ç¶²

### VRF ç›¸é—œ
- VRFManager åœ°å€å›ºå®šç‚º `0xFac10cd51981ED3aE85a05c5CFF6ab5b8e145038` (VRFManagerV2Plus)
- åªæœ‰ Heroã€Relicã€DungeonMaster éœ€è¦é€£æ¥ VRF

### éƒ¨ç½²é †åºé‡è¦æ€§
- å¿…é ˆå…ˆéƒ¨ç½² DungeonCoreï¼Œå†éƒ¨ç½²å…¶ä»–åˆç´„
- DungeonStorage å¿…é ˆåœ¨ DungeonMaster ä¹‹å‰æº–å‚™å¥½
- VRF é€£æ¥æ˜¯æœ€å¾Œè¨­å®šçš„æ­¥é©Ÿ

---

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹éŒ¯èª¤
1. **OwnableUnauthorizedAccount**: è³¬æˆ¶æ²’æœ‰ Owner æ¬Šé™
2. **å‡½æ•¸ä¸å­˜åœ¨**: æª¢æŸ¥åˆç´„ ABI å’Œå‡½æ•¸åç¨±
3. **åœ°å€éŒ¯èª¤**: ç¢ºèªåˆç´„åœ°å€æ­£ç¢ºä¸”å·²éƒ¨ç½²

### èª¿è©¦å‘½ä»¤
```bash
# æª¢æŸ¥åˆç´„æ˜¯å¦éƒ¨ç½²
npx hardhat verify --network bsc <CONTRACT_ADDRESS>

# æª¢æŸ¥ Owner
npx hardhat console --network bsc
> const contract = await ethers.getContractAt("ContractName", "ADDRESS");
> await contract.owner();
```

---

**ğŸ“ æ–‡æª”ç¶­è­·è€…**: Claude AI  
**ğŸ”„ æœ€å¾Œæ›´æ–°**: 2025-08-06  
**âœ… é©—è­‰ç‹€æ…‹**: 21/21 é€£æ¥æ­£å¸¸