# DungeonDelvers V12 環境變數更新指南

## 🚀 部署信息
- **部署時間**: 2025-07-23T09:12:11.713Z
- **網路**: BSC Mainnet
- **起始區塊**: 55018576
- **版本**: V12 (最新地城配置更新)

---

## 📋 需要更新的環境變數

### 🔧 V12 合約地址清單

```bash
VITE_MAINNET_ORACLE_ADDRESS=0x097561AFa628Ce7c6565705ce3d36DF505777070
VITE_MAINNET_DUNGEONSTORAGE_ADDRESS=0x1E5f011D9eF295aef7e6bA54e760b73976547b4b
VITE_MAINNET_PLAYERVAULT_ADDRESS=0xe7f2B5C1544a7C2530F4094AF1E492574B66bAa2
VITE_MAINNET_ALTAROFASCENSION_ADDRESS=0xc598B642aA41e5286aC9e2F64d5a2CBBbc35288b
VITE_MAINNET_DUNGEONMASTER_ADDRESS=0xA54104946c08E78fC9df1dB6db01f8C38a0a0fF6
VITE_MAINNET_HERO_ADDRESS=0xAA3734B376eDf4E92402Df4328AA6C1B8254144e
VITE_MAINNET_RELIC_ADDRESS=0xD73D7D5D279ac033c9D8639A15CcEa6B6BE2C786
VITE_MAINNET_PARTY_ADDRESS=0x54025749950137d64469fb11263B475F6A346b83
VITE_MAINNET_VIPSTAKING_ADDRESS=0x56350F90a26A844B3248F55dbd5043C3B3F27927
VITE_MAINNET_PLAYERPROFILE_ADDRESS=0x0dEf83dbD501fC7D96Bb24FcA2eAAc06c6DD5db9
VITE_MAINNET_DUNGEONCORE_ADDRESS=0xC880c8253A617FaBe83bACd010E9E26369e12aDB

# 固定地址（未變更）
VITE_MAINNET_SOULSHARDTOKEN_ADDRESS=0xc88dAD283Ac209D77Bfe452807d378615AB8B94a
VITE_MAINNET_SOUL_SHARD_TOKEN_ADDRESS=0xc88dAD283Ac209D77Bfe452807d378615AB8B94a
VITE_MAINNET_USD_TOKEN_ADDRESS=0x55d398326f99059fF775485246999027B3197955
VITE_MAINNET_POOL_ADDRESS=0x737c5b0430d5aeb104680460179aaa38608b6169
VITE_MAINNET_DUNGEONMASTERWALLET_ADDRESS=0x10925A7138649C7E1794CE646182eeb5BF8ba647
```

---

## 🌐 Vercel 前端環境變數

### 📂 需要更新的項目
- **項目名稱**: `dungeondelvers` 或相關前端項目
- **更新位置**: Project Settings → Environment Variables

### 🔄 需要更新的變數 (11個)

```bash
VITE_MAINNET_ORACLE_ADDRESS=0x097561AFa628Ce7c6565705ce3d36DF505777070
VITE_MAINNET_DUNGEONSTORAGE_ADDRESS=0x1E5f011D9eF295aef7e6bA54e760b73976547b4b
VITE_MAINNET_PLAYERVAULT_ADDRESS=0xe7f2B5C1544a7C2530F4094AF1E492574B66bAa2
VITE_MAINNET_ALTAROFASCENSION_ADDRESS=0xc598B642aA41e5286aC9e2F64d5a2CBBbc35288b
VITE_MAINNET_DUNGEONMASTER_ADDRESS=0xA54104946c08E78fC9df1dB6db01f8C38a0a0fF6
VITE_MAINNET_HERO_ADDRESS=0xAA3734B376eDf4E92402Df4328AA6C1B8254144e
VITE_MAINNET_RELIC_ADDRESS=0xD73D7D5D279ac033c9D8639A15CcEa6B6BE2C786
VITE_MAINNET_PARTY_ADDRESS=0x54025749950137d64469fb11263B475F6A346b83
VITE_MAINNET_VIPSTAKING_ADDRESS=0x56350F90a26A844B3248F55dbd5043C3B3F27927
VITE_MAINNET_PLAYERPROFILE_ADDRESS=0x0dEf83dbD501fC7D96Bb24FcA2eAAc06c6DD5db9
VITE_MAINNET_DUNGEONCORE_ADDRESS=0xC880c8253A617FaBe83bACd010E9E26369e12aDB
```

### 📝 更新步驟
1. 登入 Vercel Dashboard
2. 選擇 DungeonDelvers 前端項目
3. 進入 Settings → Environment Variables
4. 逐一更新上述 11 個變數
5. 點擊 "Redeploy" 重新部署

---

## 🚀 Render 後端環境變數

### 📂 需要更新的服務
- **服務名稱**: `dungeon-delvers-metadata-server` 或相關後端服務
- **更新位置**: Service Settings → Environment

### 🔄 需要更新的變數 (11個)

```bash
VITE_MAINNET_ORACLE_ADDRESS=0x097561AFa628Ce7c6565705ce3d36DF505777070
VITE_MAINNET_DUNGEONSTORAGE_ADDRESS=0x1E5f011D9eF295aef7e6bA54e760b73976547b4b
VITE_MAINNET_PLAYERVAULT_ADDRESS=0xe7f2B5C1544a7C2530F4094AF1E492574B66bAa2
VITE_MAINNET_ALTAROFASCENSION_ADDRESS=0xc598B642aA41e5286aC9e2F64d5a2CBBbc35288b
VITE_MAINNET_DUNGEONMASTER_ADDRESS=0xA54104946c08E78fC9df1dB6db01f8C38a0a0fF6
VITE_MAINNET_HERO_ADDRESS=0xAA3734B376eDf4E92402Df4328AA6C1B8254144e
VITE_MAINNET_RELIC_ADDRESS=0xD73D7D5D279ac033c9D8639A15CcEa6B6BE2C786
VITE_MAINNET_PARTY_ADDRESS=0x54025749950137d64469fb11263B475F6A346b83
VITE_MAINNET_VIPSTAKING_ADDRESS=0x56350F90a26A844B3248F55dbd5043C3B3F27927
VITE_MAINNET_PLAYERPROFILE_ADDRESS=0x0dEf83dbD501fC7D96Bb24FcA2eAAc06c6DD5db9
VITE_MAINNET_DUNGEONCORE_ADDRESS=0xC880c8253A617FaBe83bACd010E9E26369e12aDB
```

### 📝 更新步驟
1. 登入 Render Dashboard
2. 選擇 `dungeon-delvers-metadata-server` 服務
3. 進入 Settings → Environment
4. 逐一更新上述 11 個變數
5. 服務會自動重新部署

---

## 🔍 合約開源驗證狀態

### ✅ 已成功驗證的合約 (9個)
- `DungeonStorage` (0x1E5f011D9eF295aef7e6bA54e760b73976547b4b) ✅
- `Hero` (0xAA3734B376eDf4E92402Df4328AA6C1B8254144e) ✅
- `Relic` (0xD73D7D5D279ac033c9D8639A15CcEa6B6BE2C786) ✅
- `Party` (0x54025749950137d64469fb11263B475F6A346b83) ✅
- `PlayerVault` (0xe7f2B5C1544a7C2530F4094AF1E492574B66bAa2) ✅
- `PlayerProfile` (0x0dEf83dbD501fC7D96Bb24FcA2eAAc06c6DD5db9) ✅
- `AltarOfAscension` (0xc598B642aA41e5286aC9e2F64d5a2CBBbc35288b) ✅
- `VIPStaking` (0x56350F90a26A844B3248F55dbd5043C3B3F27927) ✅
- `DungeonMasterV8` (0xA54104946c08E78fC9df1dB6db01f8C38a0a0fF6) ✅

### ❌ 需要手動驗證的合約 (2個)

#### 1. Oracle (0x097561AFa628Ce7c6565705ce3d36DF505777070)
**構造參數 (ABI 編碼)**:
```
000000000000000000000000737c5b0430d5aeb104680460179aaa38608b6169000000000000000000000000c88dad283ac209d77bfe452807d378615ab8b94a00000000000000000000000055d398326f99059ff775485246999027b3197955
```

**原始參數**:
- poolAddress: `0x737c5b0430d5aeb104680460179aaa38608b6169`
- soulShardToken: `0xc88dAD283Ac209D77Bfe452807d378615AB8B94a`
- usdToken: `0x55d398326f99059fF775485246999027B3197955`

#### 2. DungeonCore (0xC880c8253A617FaBe83bACd010E9E26369e12aDB)
**構造參數 (ABI 編碼)**:
```
00000000000000000000000010925a7138649c7e1794ce646182eeb5bf8ba64700000000000000000000000055d398326f99059ff775485246999027b3197955000000000000000000000000c88dad283ac209d77bfe452807d378615ab8b94a
```

**原始參數**:
- initialOwner: `0x10925A7138649C7E1794CE646182eeb5BF8ba647`
- usdToken: `0x55d398326f99059fF775485246999027B3197955`
- soulShardToken: `0xc88dAD283Ac209D77Bfe452807d378615AB8B94a`

---

## 🛠️ 手動驗證步驟

### 方法 1: BSCScan 網頁驗證
1. 訪問 [BSCScan 驗證頁面](https://bscscan.com/verifyContract)
2. 輸入合約地址
3. 選擇 "Via Standard Input JSON"
4. 編譯器版本: `v0.8.19+commit.7dd6d404`
5. 上傳 `contracts` 目錄的完整 JSON
6. 輸入上述 ABI 編碼參數

### 方法 2: Sourcify 驗證
1. 訪問 [Sourcify](https://sourcify.dev/)
2. 上傳整個合約項目
3. 選擇 BSC 網路
4. 提交驗證

---

## ⚠️ 重要提醒

### 🚨 不驗證合約的風險
1. **透明度問題**: 用戶無法查看合約源碼，影響信任度
2. **安全審查**: 第三方無法進行代碼審查
3. **交互限制**: 某些 DApp 工具可能無法正確解析合約
4. **市場信心**: 未驗證合約會降低項目專業形象

### 📈 驗證完成的好處
1. **完全透明**: 所有用戶都可以查看和審查代碼
2. **增強信任**: 提高社區和投資者的信心
3. **工具支持**: BSCScan 和其他工具能正確顯示函數
4. **生態整合**: 更容易被其他 DApp 和服務整合

---

## 📊 驗證進度統計
- **總合約數**: 11
- **已驗證**: 9 (82%)
- **待驗證**: 2 (18%)

**建議**: 儘快完成剩餘 2 個合約的手動驗證，達到 100% 開源透明度。

---

## 🎯 下一步行動
1. ✅ 更新 Vercel 前端環境變數
2. ✅ 更新 Render 後端環境變數
3. ❌ 手動驗證 Oracle 合約
4. ❌ 手動驗證 DungeonCore 合約
5. ❌ 執行完整功能測試