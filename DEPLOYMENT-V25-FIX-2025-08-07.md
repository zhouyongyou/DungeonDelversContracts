# ğŸš€ DungeonDelvers V25 ä¿®å¾©ç‰ˆéƒ¨ç½²å ±å‘Š

**éƒ¨ç½²æ—¥æœŸ**: 2025-08-07  
**éƒ¨ç½²ç¶²è·¯**: BSC Mainnet  
**éƒ¨ç½²è€…**: 0x10925A7138649C7E1794CE646182eeb5BF8ba647  

## ğŸ“‹ éƒ¨ç½²æ‘˜è¦

æœ¬æ¬¡éƒ¨ç½²ä¸»è¦è§£æ±ºäº†åˆç´„å¤§å°è¶…é™å•é¡Œå’Œ VRF å›èª¿é‚è¼¯ä¿®å¾©ï¼ŒæˆåŠŸå°‡ä¸‰å€‹é—œéµåˆç´„é‡æ–°éƒ¨ç½²ä¸¦å„ªåŒ–ã€‚

### ğŸ¯ æ ¸å¿ƒå•é¡Œè§£æ±º

1. **åˆç´„å¤§å°å„ªåŒ–** - Hero å’Œ Relic åˆç´„å¾è¶…é 24KB å„ªåŒ–åˆ°åˆè¦å¤§å°
2. **VRF å›èª¿ä¿®å¾©** - AltarOfAscension åˆç´„ä¿®å¾©äº†ç”¨æˆ¶æ˜ å°„å•é¡Œ
3. **æ­»ä»£ç¢¼æ¸…ç†** - ç§»é™¤äº†æ‰€æœ‰æœªä½¿ç”¨çš„å‡½æ•¸å’Œåƒæ•¸

## ğŸ†• æ–°åˆç´„åœ°å€

| åˆç´„ | æ–°åœ°å€ | èˆŠåœ°å€ | ç‹€æ…‹ |
|------|--------|--------|------|
| **Hero** | `0x5eded2670a6e7eb4a9c581bc397edc3b48cafd6d` | `0x5d71d62fAFd07C92ec677C3Ae57984576f5955f0` | âœ… å·²æ›¿æ› |
| **Relic** | `0x7a9469587ffd28a69d4420d8893e7a0e92ef6316` | `0x5f93fCdb2ecd1A0eB758E554bfeB3A2B95581366` | âœ… å·²æ›¿æ› |
| **AltarOfAscension** | `0x3de7c97e6b65be8a1d726f5261cda1dd7d1e0cf1` | `0xaA4f3D3ed21599F501773F83a1A2B4d65b1d0AE3` | âœ… å·²æ›¿æ› |

### ğŸ”— BSCScan é©—è­‰é€£çµ
- [Hero åˆç´„](https://bscscan.com/address/0x5eded2670a6e7eb4a9c581bc397edc3b48cafd6d#code)
- [Relic åˆç´„](https://bscscan.com/address/0x7a9469587ffd28a69d4420d8893e7a0e92ef6316#code)  
- [AltarOfAscension åˆç´„](https://bscscan.com/address/0x3de7c97e6b65be8a1d726f5261cda1dd7d1e0cf1#code)

## ğŸ”§ æŠ€è¡“å„ªåŒ–è©³æƒ…

### Hero.sol å„ªåŒ–
- **å„ªåŒ–å‰**: 26.35 KB (è¶…é™ 2.35 KB)
- **å„ªåŒ–å¾Œ**: 19.70 KB (ç¯€çœ 25.2%)
- **ä¸»è¦ç§»é™¤**:
  - `_calculateAttributes()` å‡½æ•¸ (æœªä½¿ç”¨)
  - `_generateAndMintOnChain()` ç©ºå‡½æ•¸
  - `_calculateRarityUnified()` é‡è¤‡å‡½æ•¸
  - æ•´å€‹æ‰¹æ¬¡ç­‰ç´šç³»çµ± (VRF ä½¿ç”¨å¾Œå·²ç„¡æ„ç¾©)
  - ç°¡åŒ–éŒ¯èª¤è¨Šæ¯åˆ°å–®å­—å…ƒ

### Relic.sol å„ªåŒ–  
- **å„ªåŒ–å‰**: 26.07 KB (è¶…é™ 2.07 KB)
- **å„ªåŒ–å¾Œ**: 21.68 KB (ç¯€çœ 16.8%)
- **ä¸»è¦ç§»é™¤**: èˆ‡ Hero.sol ç›¸åŒçš„å„ªåŒ–é …ç›®

### AltarOfAscension.sol ä¿®å¾©
- **æ ¸å¿ƒå•é¡Œ**: VRF å›èª¿ä¸­ `_getUserFromRequest()` ç¸½æ˜¯è¿”å› `address(0)`
- **è§£æ±ºæ–¹æ¡ˆ**: æ·»åŠ  `requestIdToUser` mapping æ­£ç¢ºè¿½è¹¤ç”¨æˆ¶
- **ç§»é™¤**: ç©ºçš„ `_processUpgradeOutcome()` å‡½æ•¸

## ğŸ“¦ éœ€è¦æ›´æ–°çš„ç³»çµ±

### ğŸ¨ å‰ç«¯é…ç½®æ›´æ–°
```javascript
// éœ€è¦æ›´æ–°çš„é…ç½®æª”æ¡ˆ
const CONTRACT_ADDRESSES = {
  HERO_ADDRESS: "0x5eded2670a6e7eb4a9c581bc397edc3b48cafd6d",      // èˆŠ: 0x5d71d62fAFd07C92ec677C3Ae57984576f5955f0
  RELIC_ADDRESS: "0x7a9469587ffd28a69d4420d8893e7a0e92ef6316",     // èˆŠ: 0x5f93fCdb2ecd1A0eB758E554bfeB3A2B95581366
  ALTAROFASCENSION_ADDRESS: "0x3de7c97e6b65be8a1d726f5261cda1dd7d1e0cf1" // èˆŠ: 0xaA4f3D3ed21599F501773F83a1A2B4d65b1d0AE3
};
```

**éœ€è¦æ›´æ–°çš„æª”æ¡ˆ**:
- `src/config/contracts.js`
- `src/constants/addresses.js`  
- `.env.production`
- ä»»ä½•ç¡¬ç·¨ç¢¼åœ°å€çš„çµ„ä»¶

### ğŸ“Š å­åœ–é…ç½®æ›´æ–°
```yaml
# subgraph.yaml
dataSources:
  - kind: ethereum/contract
    name: Hero
    network: bsc
    source:
      address: "0x5eded2670a6e7eb4a9c581bc397edc3b48cafd6d"  # æ–°åœ°å€
      startBlock: 56949320  # æ–°éƒ¨ç½²å€å¡Š
  
  - kind: ethereum/contract  
    name: Relic
    network: bsc
    source:
      address: "0x7a9469587ffd28a69d4420d8893e7a0e92ef6316"  # æ–°åœ°å€
      startBlock: 56949323  # æ–°éƒ¨ç½²å€å¡Š
      
  - kind: ethereum/contract
    name: AltarOfAscension  
    network: bsc
    source:
      address: "0x3de7c97e6b65be8a1d726f5261cda1dd7d1e0cf1"  # æ–°åœ°å€
      startBlock: 56949326  # æ–°éƒ¨ç½²å€å¡Š
```

**éœ€è¦ç§»é™¤çš„å­åœ–é …ç›®**:
- BatchTier ç›¸é—œçš„ mapping å’ŒæŸ¥è©¢
- `setBatchTier` äº‹ä»¶ç›£è½
- æ‰¹æ¬¡ç­‰ç´šç›¸é—œçš„ GraphQL schema

### ğŸ”§ å¾Œç«¯é…ç½®æ›´æ–°
```env
# .env
HERO_CONTRACT_ADDRESS=0x5eded2670a6e7eb4a9c581bc397edc3b48cafd6d
RELIC_CONTRACT_ADDRESS=0x7a9469587ffd28a69d4420d8893e7a0e92ef6316
ALTAR_CONTRACT_ADDRESS=0x3de7c97e6b65be8a1d726f5261cda1dd7d1e0cf1
```

**éœ€è¦æ›´æ–°çš„æª”æ¡ˆ**:
- API é…ç½®æª”æ¡ˆ
- ç›£æ§è…³æœ¬
- è‡ªå‹•åŒ–éƒ¨ç½²è…³æœ¬

## âš ï¸ é‡è¦æ³¨æ„äº‹é …

### ğŸš¨ ç ´å£æ€§è®Šæ›´
1. **æ‰¹æ¬¡ç­‰ç´šç³»çµ±ç§»é™¤** - å‰ç«¯ä¸æ‡‰å†èª¿ç”¨ä»»ä½• BatchTier ç›¸é—œå‡½æ•¸
2. **ABI è®Šæ›´** - éœ€è¦æ›´æ–°æ‰€æœ‰ä½¿ç”¨é€™ä¸‰å€‹åˆç´„çš„ ABI æª”æ¡ˆ
3. **äº‹ä»¶è®Šæ›´** - æŸäº›äº‹ä»¶å¯èƒ½å·²è¢«ç§»é™¤æˆ–ä¿®æ”¹

### ğŸ”„ é·ç§»æ­¥é©Ÿ
1. âœ… **åˆç´„éƒ¨ç½²å®Œæˆ**
2. ğŸ”„ **æ›´æ–°å‰ç«¯åœ°å€** (é€²è¡Œä¸­)
3. â³ **æ›´æ–°å­åœ–é…ç½®** (å¾…è™•ç†)  
4. â³ **æ›´æ–°å¾Œç«¯é…ç½®** (å¾…è™•ç†)
5. â³ **æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½** (å¾…è™•ç†)
6. â³ **ç›£æ§ç³»çµ±é‹è¡Œ** (å¾…è™•ç†)

### ğŸ“‹ æ¸¬è©¦æª¢æŸ¥è¡¨
- [ ] Hero NFT é‘„é€ åŠŸèƒ½
- [ ] Relic NFT é‘„é€ åŠŸèƒ½  
- [ ] VRF éš¨æ©Ÿæ•¸ç”Ÿæˆ
- [ ] å‡æ˜ŸåŠŸèƒ½ (AltarOfAscension)
- [ ] å‰ç«¯é¡¯ç¤ºæ­£å¸¸
- [ ] å­åœ–æ•¸æ“šåŒæ­¥
- [ ] å¾Œç«¯ API æ­£å¸¸

## ğŸ‰ é æœŸæ•ˆæœ

### âœ… è§£æ±ºçš„å•é¡Œ
1. **åˆç´„éƒ¨ç½²æˆåŠŸ** - ä¸å†å— 24KB å¤§å°é™åˆ¶
2. **VRF åŠŸèƒ½æ­£å¸¸** - å‡æ˜Ÿç³»çµ±å¯ä»¥æ­£ç¢ºé‹è¡Œ  
3. **ä»£ç¢¼æ›´ç°¡æ½”** - ç§»é™¤äº†å¤§é‡æ­»ä»£ç¢¼
4. **Gas è²»ç”¨é™ä½** - å„ªåŒ–å¾Œçš„åˆç´„æ›´é«˜æ•ˆ

### ğŸ“ˆ æ€§èƒ½æå‡
- Hero åˆç´„å¤§å°æ¸›å°‘ 25.2%
- Relic åˆç´„å¤§å°æ¸›å°‘ 16.8%  
- VRF å›èª¿é‚è¼¯ä¿®å¾©å®Œæˆ
- æ•´é«”ä»£ç¢¼è³ªé‡æå‡

---

**éƒ¨ç½²æˆåŠŸï¼** ğŸŠ

*ä¸‹ä¸€æ­¥*: éœ€è¦ä¾åºæ›´æ–°å‰ç«¯ã€å­åœ–å’Œå¾Œç«¯é…ç½®ï¼Œå®Œæˆæ•´å€‹ç³»çµ±çš„é·ç§»ã€‚