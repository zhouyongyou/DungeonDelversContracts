# V26 VRF åŒæ­¥å ±å‘Š

ç”Ÿæˆæ™‚é–“: 2025/8/7 ä¸Šåˆ5:13:11

## åŒæ­¥æ¦‚æ³

- **ç‰ˆæœ¬**: V26-VRF
- **ç¶²è·¯**: BSC Mainnet
- **èµ·å§‹å€å¡Š**: 56184733
- **éŒ¯èª¤æ•¸é‡**: 0
- **å‚™ä»½æ–‡ä»¶æ•¸é‡**: 15

## VRF å‡ç´šé‡é»

### ğŸ”® çµ±ä¸€ VRF æ¶æ§‹
- æ‰€æœ‰éš¨æ©Ÿæ€§æ“ä½œä½¿ç”¨ Chainlink VRF v2.5
- Direct Funding æ¨¡å¼ (ç”¨æˆ¶æ”¯ä»˜ BNB)
- çµ±ä¸€ç¨€æœ‰åº¦æ©Ÿç‡ (44%/35%/15%/5%/1%)

### ğŸ“‹ å·²åŒæ­¥çš„ VRF åˆç´„

| åˆç´„ | åœ°å€ | é¡å‹ |
|------|------|------|
| SOULSHARD | `0x97B2C2a9A11C7b6A020b4bAEaAd349865eaD0bcF` | ğŸ“¦ æ¨™æº–åˆç´„ |
| ORACLE | `0xf8CE896aF39f95a9d5Dd688c35d381062263E25a` | ğŸ“¦ æ¨™æº–åˆç´„ |
| DUNGEONCORE | `0x8a2D2b1961135127228EdD71Ff98d6B097915a13` | ğŸ“¦ æ¨™æº–åˆç´„ |
| PLAYERVAULT | `0x62Bce9aF5E2C47b13f62A2e0fCB1f9C7AfaF8787` | ğŸ“¦ æ¨™æº–åˆç´„ |
| DUNGEONSTORAGE | `0x539AC926C6daE898f2C843aF8C59Ff92B4b3B468` | ğŸ“¦ æ¨™æº–åˆç´„ |
| DUNGEONMASTER | `0xE391261741Fad5FCC2D298d00e8c684767021253` | ğŸ”® VRF åˆç´„ |
| HERO | `0x05Cbb0DbdA4B66c4CC6f60CdADFDb4C4995D9BFD` | ğŸ”® VRF åˆç´„ |
| RELIC | `0x9B36DA9584d8170bAA1693F14E898f44eBFc77F4` | ğŸ”® VRF åˆç´„ |
| PARTY | `0x28A85D14e0F87d6eD04e21c30992Df8B3e9434E3` | ğŸ“¦ æ¨™æº–åˆç´„ |
| ALTAROFASCENSION | `0x095559778C0BAA2d8FA040Ab0f8752cF07779D33` | ğŸ”® VRF åˆç´„ |
| VIPSTAKING | `0xC0D8C84e28E5BcfC9cBD109551De53BA04e7328C` | ğŸ“¦ æ¨™æº–åˆç´„ |
| PLAYERPROFILE | `0x0f5932e89908400a5AfDC306899A2987b67a3155` | ğŸ“¦ æ¨™æº–åˆç´„ |


### ğŸ“ å·²åŒæ­¥çš„é …ç›®

- âœ… å‰ç«¯ ABI å’Œé…ç½®
- âœ… å¾Œç«¯é…ç½®
- âœ… å­åœ– ABI (éœ€æ‰‹å‹•æ›´æ–° schema å’Œ mapping)

### âš ï¸ é‡è¦è®Šæ›´

1. **ç•°æ­¥æ“ä½œ**: æ‰€æœ‰ VRF æ“ä½œéœ€è¦ 10-30 ç§’ç­‰å¾…æ™‚é–“
2. **è²»ç”¨çµæ§‹**: æ¯æ¬¡ VRF æ“ä½œå¢åŠ ç´„ $0.6-1.0 æˆæœ¬
3. **ç¨€æœ‰åº¦æ©Ÿåˆ¶**: 1å€‹å’Œ50å€‹NFTä½¿ç”¨ç›¸åŒæ©Ÿç‡
4. **æ–°äº‹ä»¶**: VRFMintRequested, VRFMintFulfilled ç­‰

### ğŸ”„ éœ€è¦æ‰‹å‹•è™•ç†çš„é …ç›®

1. **å‰ç«¯æ›´æ–°**:
   - å¯¦ç¾ VRF ç­‰å¾…ç‹€æ…‹ UI
   - æ·»åŠ è«‹æ±‚é€²åº¦è¿½è¹¤
   - æ›´æ–°è²»ç”¨è¨ˆç®—é¡¯ç¤º
   - æ·»åŠ éæœŸè«‹æ±‚å–æ¶ˆåŠŸèƒ½

2. **å­åœ–æ›´æ–°**:
   - æ›´æ–° schema.graphql æ·»åŠ  VRF å¯¦é«”
   - æ›´æ–° mapping.ts è™•ç† VRF äº‹ä»¶
   - æ¸¬è©¦æ–°çš„äº‹ä»¶ç´¢å¼•

3. **å¾Œç«¯æ›´æ–°**:
   - å¯¦ç¾ VRF ç‹€æ…‹ç›£è½
   - æ·»åŠ ç•°æ­¥æ“ä½œé€šçŸ¥æ©Ÿåˆ¶
   - æ›´æ–° API æ¥å£æ”¯æ´ VRF æŸ¥è©¢

## å‚™ä»½æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å·²è‡ªå‹•å‚™ä»½ï¼Œå¦‚éœ€å›æ»¾å¯ä½¿ç”¨:

- **master-config**: `/Users/sotadic/Documents/DungeonDelversContracts/config/master-config.json.backup-1754514791108`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/src/abis/Party.json.backup-1754514791895`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/DDgraphql/dungeon-delvers/abis/Party.json.backup-1754514791896`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/src/abis/VIPStaking.json.backup-1754514791897`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/DDgraphql/dungeon-delvers/abis/VIPStaking.json.backup-1754514791898`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/src/abis/PlayerProfile.json.backup-1754514791899`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/DDgraphql/dungeon-delvers/abis/PlayerProfile.json.backup-1754514791899`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/src/abis/DungeonCore.json.backup-1754514791901`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/src/abis/Oracle.json.backup-1754514791902`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/src/abis/PlayerVault.json.backup-1754514791903`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/DDgraphql/dungeon-delvers/abis/PlayerVault.json.backup-1754514791903`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/src/abis/DungeonStorage.json.backup-1754514791905`
- **abi**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/src/abis/SoulShardToken.json.backup-1754514791906`
- **backend-config**: `/Users/sotadic/Documents/dungeon-delvers-metadata-server/config/contracts.json.backup-1754514791906`
- **subgraph-config**: `/Users/sotadic/Documents/GitHub/DungeonDelvers/DDgraphql/dungeon-delvers/subgraph.yaml.backup-1754514791907`


## ä¸‹ä¸€æ­¥è¡Œå‹•

1. **æ¸¬è©¦ VRF åŠŸèƒ½**:
   ```bash
   # åœ¨æ¸¬è©¦ç¶²æ¸¬è©¦ VRF æ“ä½œ
   npm run test:vrf
   ```

2. **æ›´æ–°å­åœ–**:
   ```bash
   cd DDgraphql/dungeon-delvers
   # æ‰‹å‹•æ›´æ–° schema å’Œ mapping
   npm run deploy
   ```

3. **å‰ç«¯æ¸¬è©¦**:
   - æ¸¬è©¦é‘„é€ æµç¨‹ (ç­‰å¾… VRF å›èª¿)
   - æ¸¬è©¦å‡ç´šæµç¨‹ (VRF çµæœè™•ç†)  
   - æ¸¬è©¦åœ°åŸæ¢ç´¢ (ç•°æ­¥çµæœé¡¯ç¤º)

4. **ç”¨æˆ¶æºé€š**:
   - èªªæ˜ VRF ç­‰å¾…æ™‚é–“
   - è§£é‡‹è²»ç”¨å¢åŠ åŸå› 
   - å¼·èª¿å…¬å¹³æ€§æå‡

## VRF æŠ€è¡“è¦æ ¼

- **VRF Wrapper**: 0x471506e6ADED0b9811D05B8cAc8Db25eE839Ac94
- **LINK Token**: 0x404460C6A5EdE2D891e8297795264fDe62ADBB75
- **ç¢ºèªæ•¸**: 3 å€‹å€å¡Š
- **Gas Limit**: 200,000
- **é è¨ˆç­‰å¾…æ™‚é–“**: 10-30 ç§’ (BSC ä¸»ç¶²)

## å›æ»¾æŒ‡ä»¤

å¦‚æœéœ€è¦å›æ»¾åˆ°èˆŠç‰ˆæœ¬:
```bash
node scripts/active/v26-sync-all-vrf.js --rollback
```
